# План A — Только Continue в VS Code (быстро, минимум кода)

Цель: вайбкодинг “как Codex” внутри VS Code, локальная модель, без автономного выполнения команд вне IDE.

---

## Этап 0. Принципы приватности
- Работать только с локальным LLM endpoint (`localhost`).
- Отключить телеметрию Continue.
- Запретить облачные провайдеры в конфиге.

Результат: код и промпты не уходят в интернет.

---

## Этап 1. Локальный сервер модели (OpenAI-compatible)
1. Поднять локальный endpoint `/v1/chat/completions` (у тебя уже есть `serve_lora.py`).
2. Проверить ответ curl/HTTP:
   - POST `http://localhost:8000/v1/chat/completions`
3. (Опционально) добавить `/v1/models`, чтобы Continue мог “видеть” список моделей.

Результат: локальный API работает стабильно.

---

## Этап 2. Подключение Continue через config.yaml
1. Открыть `~/.continue/config.yaml` (через Continue Settings → Open Config).
2. Добавить локальную модель:
   - provider: openai
   - apiBase: http://localhost:8000/v1
   - model: qwen2.5-coder-lora
3. Отключить telemetry.

Результат: Continue использует локальный endpoint.

---

## Этап 3. Настройка режимов вайбкодинга (rules)
1. В Continue → Rules:
   - “Пиши патчами, не переписывай файл целиком”
   - “Сначала план, потом код”
   - “Всегда добавляй тесты”
   - “Не трогай секреты/.env”
2. Выделить роли:
   - chat/edit/apply (для правок)
3. Проверка: попросить отрефакторить файл + добавить тесты.

Результат: предсказуемое поведение.

---

## Этап 4. Индексация проекта в Continue
1. Включить Indexing (если нужно).
2. Настроить исключения:
   - .env, node_modules, .venv, build, dist, secrets

Результат: модель “видит” репозиторий, но без утечек.

---

## Этап 5. Качество и контроль
1. Встроенные “quality gates” через промпт-правила:
   - “перед apply прогоняй линтеры/тесты — только предложением команд”
2. Чек-лист PR:
   - тесты, типы, доки, крайние случаи.

Результат: меньше ошибок, стабильный вайбкодинг.

---

## Ограничения варианта A (честно)
- Автономность ограничена: Continue сам по себе не “запускает мир”, он помогает в IDE.
- “Доступ ко всем ресурсам ПК” не реализуется как агентный runtime.
- Консилиум агентов — только как промпт-симуляция (не настоящие независимые агенты).

---

## Когда переходить на B/C
- Нужно запускать тесты/команды автоматически.
- Нужно несколько агентов/ролей с голосованием.
- Нужно безопасное tool-API (fs/git/shell).
