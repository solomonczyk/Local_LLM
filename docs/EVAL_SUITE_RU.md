# Eval Suite v1 (RU) — “боевые задачи” для Local Consilium

## ??????? ?????
- ??????: `tools\audit.ps1`
- ?????: `reports/consilium_audit_*.json`
- ????? ??????: `tools/consilium_audit.py`


Цель этого набора — измерять качество системы **до/после** изменений (промпты, инструменты, модель, LoRA, RAG) и не допускать регрессий.

## Правила прогона
- Все задачи гоняются **локально**.
- Если включается Director (облако) — это фиксируется как отдельная метрика (сколько раз и почему).
- Любые изменения файлов — только через approval в UI (Pending Actions).

## Метрики (минимальный набор)
- **Pass/Fail** по критериям задачи
- **Итерации**: сколько циклов “ответ → tool‑actions → проверка” потребовалось
- **Tool errors**: неверные аргументы/путь/сбой выполнения/отказ guard’ов
- **Объём контекста** (грубо): сколько файлов и сколько текста было подтянуто
- **Cloud calls**: число обращений к Director

## Шаблон задачи
Каждая задача описывается так:
- `ID`: например `T-001`
- `Категория`: `bugfix|feature|refactor|tools|devops|security|db`
- `Языки`: `py|ts|go|sql|mixed`
- `Ожидаемые инструменты`: `rg|files|git|shell|db|none`
- `Критерии приемки`: чёткий “Done when…”

---

## Набор задач v1 (стартовый)

### T-001 — Быстрый поиск контекста (repo navigation)
- Категория: `tools`
- Языки: `mixed`
- Ожидаемые инструменты: `rg`, `read_file`
- Критерии приемки: найден правильный файл/функция и выдан краткий контекст (что делает, где вызывается).

### T-002 — Мелкий баг‑фикс + тест
- Категория: `bugfix`
- Языки: `py`
- Ожидаемые инструменты: `read_file`, `edit_file`, `run_command`
- Критерии приемки: добавлен/обновлён тест, тест проходит, изменения минимальны.

### T-003 — Рефакторинг без изменения поведения
- Категория: `refactor`
- Языки: `py|ts|go`
- Ожидаемые инструменты: `edit_file`, `run_command`
- Критерии приемки: тесты проходят, публичные API/сигнатуры не ломаются, дифф разумный.

### T-004 — Git workflow (безопасный)
- Категория: `tools`
- Языки: `mixed`
- Ожидаемые инструменты: `git status`, `git diff`, `git log`
- Критерии приемки: корректная диагностика состояния репозитория и предложение следующего шага (без push/reset).

### T-005 — Nginx/Docker диагностика
- Категория: `devops`
- Языки: `mixed`
- Ожидаемые инструменты: чтение конфигов + команды docker (read‑only где возможно)
- Критерии приемки: объяснена причина, предложен минимальный фикс, указаны риски.

### T-006 — SQL безопасный запрос
- Категория: `db`
- Языки: `sql`
- Ожидаемые инструменты: `db`
- Критерии приемки: запрос валиден, ограничен `LIMIT`, нет опасных операций без явного подтверждения.

### T-007 — Security: поиск утечек
- Категория: `security`
- Языки: `mixed`
- Ожидаемые инструменты: `rg`
- Критерии приемки: найдены потенциальные секреты/ключи, предложен план ремедиации (gitignore/rotation/history cleanup).

### T-008 — Multi‑file feature (маленькая)
- Категория: `feature`
- Языки: `mixed`
- Ожидаемые инструменты: `read_file`, `edit_file`, `write_file`, `run_command`
- Критерии приемки: фича реализована, затронуты нужные слои (не “всё в одном файле”), тест/смоук‑проверка добавлены.

### T-009 — Документация/онбординг
- Категория: `tools`
- Языки: `md`
- Ожидаемые инструменты: `read_file`, `edit_file`
- Критерии приемки: инструкция воспроизводима с нуля (docker up → адрес UI → проверка health).

### T-010 — Tool‑use корректность (валидация аргументов)
- Категория: `tools`
- Языки: `mixed`
- Ожидаемые инструменты: tool‑preview/dry‑run
- Критерии приемки: система предлагает действия через Pending Actions, показывает preview/diff, не делает silent‑writes.

