# üìò Project Log ‚Äî LLM_local (—Å–≤–æ–¥–∫–∞ –¥–æ —Ç–µ–∫—É—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞)

**–ü–µ—Ä–∏–æ–¥ —Ä–∞–±–æ—Ç:** —Å **04 —è–Ω–≤–∞—Ä—è 2026** –ø–æ **15 —è–Ω–≤–∞—Ä—è 2026**

> –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç ‚Äî **–µ–¥–∏–Ω—ã–π –ª–æ–≥ –ø—Ä–æ–µ–∫—Ç–∞**, —Ñ–∏–∫—Å–∏—Ä—É—é—â–∏–π —Ü–µ–ª—å, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –ø—Ä–∏–Ω—è—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è –∏ –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–æ —Ç–µ–∫—É—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞. –ü—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Ä–∞–±–æ—Ç –±–µ–∑ –ø–æ—Ç–µ—Ä—å.

---

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞–Ω–∏–µ **–ª–æ–∫–∞–ª—å–Ω–æ–π, —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π, —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã (Consilium)**, –≥–¥–µ:
- LLM ‚Äî —è–¥—Ä–æ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è,
- –∞–≥–µ–Ω—Ç—ã –∏–º–µ—é—Ç —Ä–æ–ª–∏, KB –∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é,
- —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ (–ª–æ–∫–∞–ª—å–Ω–æ / VPS),
- –≤–æ–∑–º–æ–∂–Ω—ã –¥–æ–æ–±—É—á–µ–Ω–∏–µ, –∑–∞–º–µ–Ω–∞ backend –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ.

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞ —Ç–µ–∫—É—â–µ–º —ç—Ç–∞–ø–µ: **–∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π –∏ –∞–≥–µ–Ω—Ç–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ**, –∞ –Ω–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å.

---

## üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –∏–¥–µ—è

- **LLM backend** ‚Äî –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å OpenAI-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–º API
- **Inference-–ø—É—Ç–∏ (–¥–≤–∞):**
  - `transformers + peft (LoRA)` ‚Äî –¥–ª—è R&D –∏ –∫–∞—á–µ—Å—Ç–≤–∞
  - `llama.cpp + gguf` ‚Äî –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏
- **Consilium** ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π –ª–æ–≥–∏–∫–∏ (Director, Architect, Dev, QA, Security –∏ –¥—Ä.)

–ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç –≤—ã–±—Ä–∞–Ω –ø—É—Ç—å:
> **transformers + peft (LoRA) ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π inference**

---

## ü§ñ –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å

- **–ú–æ–¥–µ–ª—å:** `Qwen/Qwen2.5-Coder-1.5B-Instruct`
- **–¢–∏–ø:** Instruct
- **–§–æ—Ä–º–∞—Ç –æ–±—É—á–µ–Ω–∏—è:** PyTorch / safetensors
- **–õ–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å:**
  ```
  F:\Dev\Projects\LLM_local\models\Qwen2.5-Coder-1.5B-Instruct
  ```

–¢–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:
- **GGUF –≤–µ—Ä—Å–∏—è (–∏–Ω—Ñ–µ—Ä–µ–Ω—Å –±–µ–∑ LoRA):**
  `qwen2.5-coder-1.5b-instruct-q4_k_m.gguf`

---

## üìö –î–∞—Ç–∞—Å–µ—Ç

- **–ò—Å—Ç–æ—á–Ω–∏–∫:** CodeSearchNet
- **–Ø–∑—ã–∫:** Python
- **–ü–æ–¥–≤—ã–±–æ—Ä–∫–∞:** 1% train split
- **–†–∞–∑–º–µ—Ä:** 4121 –ø—Ä–∏–º–µ—Ä–æ–≤

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞

1. –°–∫–∞—á–∞–Ω —á–µ—Ä–µ–∑ `datasets.load_dataset(..., trust_remote_code=True)`
2. –°–æ—Ö—Ä–∞–Ω—ë–Ω –ª–æ–∫–∞–ª—å–Ω–æ:
   ```
   codesearchnet_python_1pct
   ```
3. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –≤ —Ñ–æ—Ä–º–∞—Ç —Å –∫–æ–ª–æ–Ω–∫–æ–π `text` (instruction-style):
   ```
   ### Task
   Write Python code for the following description.
   <docstring>

   ### Solution
   <code>
   ```
4. –ò—Ç–æ–≥–æ–≤—ã–π –ø—É—Ç—å –¥–∞—Ç–∞—Å–µ—Ç–∞:
   ```
   F:\Dev\Projects\LLM_local\codesearchnet_python_1pct_filtered
   ```

---

## üß™ –û–±—É—á–µ–Ω–∏–µ (LoRA)

- **–¢–∏–ø:** LoRA (—á–µ—Ä–µ–∑ `trl.SFTTrainer`)
- **–≠–ø–æ—Ö–∏:** 1
- **GPU:** NVIDIA GTX 1060 5GB
- **CUDA:** –≤–∫–ª—é—á–µ–Ω–∞ (torch+cu121)

### –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—É—á–µ–Ω–∏—è

- **–°—Ç–∞—Ç—É—Å:** ‚úÖ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
- **–ò—Ç–µ—Ä–∞—Ü–∏–∏:** 516 / 516
- **Train loss:** ~1.14
- **–°—Ä–µ–¥–Ω—è—è token accuracy:** ~0.74

### LoRA –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

- **–ü–∞–ø–∫–∞:**
  ```
  F:\Dev\Projects\LLM_local\lora_qwen2_5_coder_1_5b_python
  ```
- **–§–∞–π–ª—ã:**
  - `adapter_model.safetensors`
  - `adapter_config.json`

---

## üß∞ –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ —Å—Ç–µ–∫

- Python 3.12 (venv: `.venv312`)
- PyTorch 2.5.1 + CUDA 12.1
- Transformers 4.57.x
- TRL 0.26.x
- Datasets 4.x
- Accelerate
- HuggingFace Hub (–∫—ç—à –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –Ω–∞ –¥–∏—Å–∫ F:)

---

## üê≥ Docker / Runtime (—Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)

- `docker-compose.yml` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `llama.cpp + gguf`
- LoRA **–Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞** –∫ —Ç–µ–∫—É—â–µ–º—É inference
- `serve_lora.py`:
  - –∂—ë—Å—Ç–∫–æ –∑–∞—à–∏—Ç base model
  - –Ω–µ —á–∏—Ç–∞–µ—Ç env
  - –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `--port`
  - —Ç—Ä–µ–±—É–µ—Ç `peft`
- `docker_entrypoint.py`:
  - –¥–µ–ª–∞–µ—Ç preflight LLM **–¥–æ** —Å—Ç–∞—Ä—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ LLM-—Å–µ—Ä–≤–µ—Ä–∞ (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π —Ä–∏—Å–∫)

---

## ‚ö†Ô∏è –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–∏—Å–∫–∏

- LoRA –æ–±—É—á–µ–Ω–∞, –Ω–æ **–Ω–µ —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ inference**
- –î–≤–∞ backend-–ø—É—Ç–∏ –±–µ–∑ —è–≤–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
- GGUF –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —á–∞—Å—Ç–æ–≥–æ –¥–æ–æ–±—É—á–µ–Ω–∏—è
- –ù–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ eval-suite
- –ù–µ—Ç –≤–µ—Ä—Å–∏–∏/—Ö—ç—à–µ–π –º–æ–¥–µ–ª–∏ –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞

---

## ‚úÖ –ü—Ä–∏–Ω—è—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **transformers + peft** –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø—É—Ç—å –Ω–∞ —ç—Ç–∞–ø–µ R&D
- GGUF —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ deployment-–æ–ø—Ü–∏—é –ø–æ–∑–∂–µ
- –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –º–æ–¥–µ–ª—å –∫–∞–∫ versioned artifact
- –í–≤–µ—Å—Ç–∏ –µ–¥–∏–Ω—ã–π —Ñ–ª–∞–≥ backend (–Ω–∞–ø—Ä–∏–º–µ—Ä `LLM_BACKEND=peft|llama_cpp`)

---

## üìç –¢–µ–∫—É—â–∞—è —Ç–æ—á–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ú—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –Ω–∞ —ç—Ç–∞–ø–µ:

> **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ–±—É—á–µ–Ω–Ω–æ–π LoRA –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É inference-—Å—Ç–µ–∫—É**

–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã):
- –ø—Ä–∏–≤–µ—Å—Ç–∏ `serve_lora.py` –∫ production-ready —Å–æ—Å—Ç–æ—è–Ω–∏—é
- –ø–æ–¥–∫–ª—é—á–∏—Ç—å LoRA –≤ Docker
- —Å–¥–µ–ª–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π eval
- –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å (version/hash)

---

## üìù –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞

–≠—Ç–æ—Ç —Ñ–∞–π–ª –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è:
- –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ—Å–ª–µ –ø–∞—É–∑—ã
- –ø–µ—Ä–µ–¥–∞—á–∏ –ø—Ä–æ–µ–∫—Ç–∞ –¥—Ä—É–≥–æ–º—É –∞–≥–µ–Ω—Ç—É/—á–µ–ª–æ–≤–µ–∫—É
- –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ—Ç–µ—Ä–∏ –∑–Ω–∞–Ω–∏–π –∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è –æ—à–∏–±–æ–∫

---

*–ö–æ–Ω–µ—Ü –ª–æ–≥–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç —Ñ–∏–∫—Å–∞—Ü–∏–∏.*

